---
categories: english, gentoo, python, gpypi2, gsoc, ebuild, portage
author: Domen Kožar
date: 2010/07/20 14:49:00
title: "GPyPi2 — Google Summer of Code week #7 and #8"
draft: false
---
Greetings, following is the weekly update for `gpypi2 <http://docs.fubar.si/gpypi2/>`_ project. It's
main purpose is to generate ebuilds from `Python Package Index <http://pypi.python.org/pypi>`_.
Quick links to project info: 

* `Repository, issue tracker <http://bitbucket.org/iElectric/g-pypi2>`_
* `Hudson CI instance <http://hudson.fubar.si/job/g-pypi2/>`_
* `Sphinx documentation generated by hudson on each commit <http://docs.fubar.si/gpypi2/>`_

Very successful 2 weeks. Two days of vacations and nice shiney configuration utility together with questionnaire. 


Previous 2 weeks (5th - 19th July)
----------------------------------




Task: Write configuration skeleton
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

::

    Currently, gpypi2 code only takes configuration from command line.
    I'd like to extend that to config file (.ini), get data directly from setup.py
    and interactive questionaire. In order for that to function properly,
    configuration needs to be done in right sequence.

    Following week I will write down the design and implement initial working prototype.

Configuration dispatcher fully implemented! Also we have already working questionnaire
functionality. Details can be found at `http://docs.fubar.si/gpypi2/userguide.html#configuration
<http://docs.fubar.si/gpypi2/userguide.html#configuration>`_




Task: sync command - populate overlay with successful ebuilds from pypi
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

::

    When I will get bored or stuck with task #1, I'll start working on command that will
    generate ebuilds from all packages in pypi to an overlay.

Initial "sync" command is implemented. Still lacking proper error handling, metadata generation and
manifest update support. Will be a lot easier to implement with current configuration management.

Additional, following mini-tasks were performed:

* fixed echo command to work properly
* correct handling of whitespace in rendered ebuilds
* replace 4 spaces with a tab in rendered ebuilds




Upcoming week (20th - 26th July)
--------------------------------




Task: fix TODOs in the code
~~~~~~~~~~~~~~~~~~~~~~~~~~~

::

    Code currently has about `60 TODOs <http://hudson.fubar.si/job/g-pypi2/portage=portage2.1,python=2.6/58/tasksResult/?>`_ that need to be address for a better codebase.




Task: Implement "python setup.py bdist_ebuild" command
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

::

    I'll peek into distutils heart and implement most basic bdist command to output an ebuild.
    I will basically the same stuff we currently do,
    except it will parse data from setup.py itself and not through pypi.


